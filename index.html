<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>প্রিমিয়াম বারকোড জেনারেটর</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Roboto', sans-serif;
    text-align: center;
    background: linear-gradient(135deg, #f0f4ff, #e0e7ff);
    padding: 40px 20px;
}
h2 { color: #1a202c; font-size: 2rem; margin-bottom: 30px; }
#barcodeContainer {
    margin: 20px auto;
    padding: 30px;
    display: inline-block;
    background: #fff;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}
input, select {
    margin: 10px 5px;
    padding: 12px 18px;
    font-size: 16px;
    border-radius: 10px;
    border: 1px solid #cbd5e1;
    outline: none;
}
#downloadContainer {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
}
button {
    padding: 12px 20px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    background: linear-gradient(90deg, #4f46e5, #3b82f6);
    color: #fff;
    transition: all 0.3s ease;
}
button:hover {
    background: linear-gradient(90deg, #3b82f6, #4f46e5);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}
label { font-weight: 500; color: #1f2937; }
</style>
</head>
<body>
<h2>প্রিমিয়াম বারকোড জেনারেটর</h2>

<label>বারকোড ডেটা:</label>
<input type="text" id="barcodeData" placeholder="বারকোড লিখুন"><br>
<label>বারকোড কালার:</label>
<input type="color" id="barcodeColor" value="#000000"><br>
<label>ব্যাকগ্রাউন্ড কালার:</label>
<input type="color" id="bgColor" value="#ffffff"><br>
<label>লেখা দেখাবো কি?</label>
<select id="displayValue">
    <option value="true">হ্যাঁ</option>
    <option value="false">না</option>
</select><br>

<div id="barcodeContainer">
    <svg id="barcode"></svg>
</div>

<div id="downloadContainer">
    <button onclick="downloadBarcode('png')">PNG ডাউনলোড</button>
    <button onclick="downloadBarcode('jpg')">JPG ডাউনলোড</button>
    <button onclick="downloadBarcode('transparent')">Transparent PNG</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<script>
const svg = document.getElementById('barcode');
const barcodeData = document.getElementById('barcodeData');
const barcodeColor = document.getElementById('barcodeColor');
const bgColor = document.getElementById('bgColor');
const displayValue = document.getElementById('displayValue');

function updateBarcode() {
    JsBarcode(svg, barcodeData.value || "123456789012", {
        format: "CODE128",
        lineColor: barcodeColor.value,
        background: bgColor.value,
        displayValue: displayValue.value === 'true',
        width: 2,
        height: 120,
        fontSize: 18
    });
}

// Initial render
updateBarcode();

// Real-time update
barcodeData.addEventListener('input', updateBarcode);
barcodeColor.addEventListener('input', updateBarcode);
bgColor.addEventListener('input', updateBarcode);
displayValue.addEventListener('change', updateBarcode);

function downloadBarcode(type) {
    const xml = new XMLSerializer().serializeToString(svg);
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    const data = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(xml)));

    img.onload = function() {
        canvas.width = img.width;
        canvas.height = img.height;

        if(type === 'transparent') {
            // Clear canvas, no background
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        } else {
            // Fill canvas with user-selected background color
            ctx.fillStyle = bgColor.value;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        ctx.drawImage(img, 0, 0);

        const link = document.createElement('a');
        if(type === 'jpg') link.href = canvas.toDataURL('image/jpeg');
        else link.href = canvas.toDataURL('image/png');
        link.download = type === 'jpg' ? 'barcode.jpg' : type==='transparent' ? 'barcode_transparent.png' : 'barcode.png';
        link.click();
    };
    img.src = data;
}
</script>
</body>
</html>
